{% extends "admin_dashboard/base.html" %}

{% block content %}
<!-- Container Utama Statistik -->
<div class="w-full max-w-[1120px] mx-auto p-6 bg-white rounded-[12px] shadow-[0px_0px_2px_rgba(0,0,0,0.25)]">
    <h2 class="text-2xl font-semibold text-gray-800">Statistik Dashboard</h2>
    <p class="text-gray-600">Pantau performa dan data kos secara real-time untuk pengambilan keputusan yang lebih baik.</p>

    <!-- Filter Dropdown -->
    <div class="flex gap-4 mt-4">
        <select class="border border-gray-300 rounded-md p-2 w-[200px]">
            <option>Rentang Waktu</option>
        </select>
        <select class="border border-gray-300 rounded-md p-2 w-[200px]">
            <option>Jenis Kamar</option>
        </select>
        <button class="bg-[#588157] text-white px-4 py-2 rounded-md">Filter</button>
    </div>

    <!-- Kotak Statistik -->
    <div class="flex gap-4 mt-6">
        <!-- Total Penghuni Aktif -->
        <div id="penghuni-aktif" class="flex flex-col justify-center items-center w-[333px] h-[120px] p-[14px] rounded-[12px] shadow-md bg-gradient-to-r from-[#588157] to-[#9CC59C]">
            <p class="text-[14px] font-semibold uppercase text-white leading-[20px] font-[Open Sans] text-center">TOTAL PENGHUNI AKTIF</p>
            <p class="text-[24px] font-semibold text-white leading-[20px] font-[Open Sans] text-center mt-2" id="total-penghuni-aktif">-</p>
        </div>

        <!-- Total Penghuni Baru Bulan Ini -->
        <div id="penghuni-baru" class="flex flex-col justify-center items-center w-[333px] h-[120px] p-[14px] rounded-[12px] shadow-md bg-gradient-to-r from-[#2A9D8F] to-[#5BCDBF]">
            <p class="text-[14px] font-semibold uppercase text-white leading-[20px] font-[Open Sans] text-center">TOTAL PENGHUNI BARU BULAN INI</p>
            <p class="text-[24px] font-semibold text-white leading-[20px] font-[Open Sans] text-center mt-2" id="total-penghuni-baru">-</p>
        </div>

        <!-- Total Penghuni Keluar Bulan Ini -->
        <div id="penghuni-keluar" class="flex flex-col justify-center items-center w-[333px] h-[120px] p-[14px] rounded-[12px] shadow-md bg-gradient-to-r from-[#63A3F8] to-[#80ABE4]">
            <p class="text-[14px] font-semibold uppercase text-white leading-[20px] font-[Open Sans] text-center">TOTAL PENGHUNI KELUAR BULAN INI</p>
            <p class="text-[24px] font-semibold text-white leading-[20px] font-[Open Sans] text-center mt-2" id="total-penghuni-keluar">-</p>
        </div>
    </div>

    <!-- Chart Container -->
    <div class="mt-6">
        <canvas id="statistikChart"></canvas>
    </div>
</div>

<script>
    fetch("{% url 'statistik_penghuni' %}")
        .then(response => response.json())
        .then(data => {
            document.getElementById("total-penghuni-aktif").innerText = data.total_penghuni_aktif + " orang";
            document.getElementById("total-penghuni-baru").innerText = data.total_penghuni_baru + " orang";
            document.getElementById("total-penghuni-keluar").innerText = data.total_penghuni_keluar + " orang";
        })
        .catch(error => console.error("Error fetching data:", error));
</script>

{% endblock %}
